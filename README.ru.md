# HD-Sprays

_[English](README.md) | **Русский**_

AMX Mod X плагин для Counter-Strike.

Позволяет игрокам рисовать спреи в высоком разрешении, используя модели и спрайты, установленные на сервере. Особенности плагина:
* API для гибкой интеграции
* отображение никнейма игрока, нарисовавшего спрей
* предпросмотр спреев
* поддержка подмоделей и скинов
* поддержка анимаций (скелетные и покадровые анимации)
* поддержка спрайтов
* сохранение выбранного игроком спрея в локальную базу данных nVault по индентификатору steam_id

## Настройки

### Квары:
| Имя | Значение по умолчанию | Описание |
| --- |---------------|-----------------------------|
| hd_spray_light | 0             | Включить «подсветку» спрея. |
| hd_spray_lifetime | 200.0      | Время до исчезновения нарисованного спрея в секундах. |
| hd_max_sprays | 32             | Максимальное количество нарисованных спреев (максимальное количество созданных сущностей на карте). Если значение превышено, самый старый нарисованный спрей удаляется. |
| hd_spray_client_decal | 1      | Разрешить игрокам рисовать стандартные спреи. |
| hd_spray_movable_surface | 0   | Разрешить игрокам рисовать спреи на движущихся поверхностях. |
| hd_spray_intersects | 1        | Запретить рисовать спреи поверх других спреев. |
| hd_spray_show_owner | 1        | Включить отображение никнейма игрока при наведении прицела на спрей. |
| hd_spray_round_cleanup | 0     | Включить удаление всех нарисованных спреев в начале раунда. |
| hd_spray_print_delay | 0     | Выводить время до возможности нарисовать новый спрей. (0 - не выводить, 1 - выводить по центру, 2 - выводить в чат) |

### Конфигурация спреев:
Добавление и изменение спреев производятся в файле *addons/amxmodx/configs/sprays.ini*. Пример конфигурации:
```
; "name"         "model"              type  body  skin  framerate  width  height  scale  cost  access
"spray 1"        "spray_pack.mdl"     "n"   0     0     1.0        45.0   45.0    1.0    150   ""
"spray 2"        "spray_pack.mdl"     "n"   1     0     1.0        45.0   45.0    1.0    300   "t"
"animated spray" "animated_spray.mdl" "a"   0     0     10.0       40.0   45.0    1.0    500   ""
```

Описание параметров:
* `name` - имя спрея.
* `model` - используемая модель. Допускаются модели с расширением *.mdl* или *.spr*. На разные спреи можно использовать одинаковые модели.
* `type` - тип спрея (*n* - обычный спрей, *a* - анимированный спрей).
* `body` - номер подмодели (кадра для спрайта).
* `skin` - номер скина.
* `framerate` - частота кадров для анимированного спрея.
* `width` - ширина спрея.
* `height` - высота спрея.
* `scale` - масштаб спрайта.
* `cost` - цена. *Данный параметр используется только в API*
* `access` - флаг доступа. *Данный параметр используется только в API*

## API
Описание API приведено в [этом файле](addons/amxmodx/scripting/include/hdsprays.inc).
Пример с реализацией меню представлен в плагине [next21_hd_sprays_menu.sma](addons/amxmodx/scripting/next21_hd_sprays_menu.sma). Открытие меню выбора спрея производится командой `say /spray`.

## Генератор спреев
Для быстрого создания спреев из набора изображений рекомендуется использовать инструмент **sprays_gen**. [Подробное описание инструмента](utils/sprays_gen/README.ru.md)

## Требования
- [Reapi](https://github.com/s1lentq/reapi)

## Авторы
- [Psycrow](https://github.com/Psycrow101)
- [Polarhigh](https://github.com/Polarhigh)
